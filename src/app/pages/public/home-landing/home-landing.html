<mat-sidenav-container class="sidenav-container">

  <mat-sidenav #drawer mode="side" class="sidenav" fixedInViewport>
    <mat-toolbar color="primary">Menú</mat-toolbar>
    <mat-nav-list>
      <a mat-list-item (click)="drawer.close()">Inicio</a>
      <a mat-list-item (click)="goToAdmin(); drawer.close()">
        <mat-icon>admin_panel_settings</mat-icon>
        <span>Admin</span>
      </a>
    </mat-nav-list>
  </mat-sidenav>

  <mat-sidenav-content>
    <mat-toolbar color="primary" class="toolbar">
      <button mat-icon-button (click)="drawer.toggle()" aria-label="Toggle sidenav">
        <mat-icon>menu</mat-icon>
      </button>
      <span class="logo">FUNKOMANIA</span>
      <span class="spacer"></span>
    </mat-toolbar>

    <section class="row p-5">
      <div class="col-12">
        <h2 class="text-center display-8 mt-5">
          Encuentra lo que necesitas para tu colección.
        </h2>
      </div>

      <!-- Cards -->
      <div class="col-12 col-md-6 col-lg-4 col-xl-3 mb-4 d-flex align-items-stretch" *ngFor="let producto of productos; let i = index">
        <div class="card w-100 h-100 shadow-sm">
          <img
            [src]="producto.imageUrl || 'https://i5.walmartimages.com/seo/Funko-POP-Football-Kylian-Mbapp-PSG_26b8cdaf-a999-4e78-904a-fe3930e8926c_1.95fa658cc18ab713bc292e2763d63ee6.png'"
            [alt]="getProductAltText(producto) || 'Imagen del producto'" 
            class="card-img-top"
            width="300"
            height="250"
            [loading]="i < 4 ? 'eager' : 'lazy'"
            [attr.fetchpriority]="i === 0 ? 'high' : i < 4 ? 'auto' : 'low'"
            role="img" />

          <div class="card-body d-flex flex-column justify-content-between">
            <div>
              <h5 class="card-title">{{ producto.model }}</h5>
              <p class="card-text mb-2">
                Precio: <strong>{{ formatPrice(producto.price!) }}</strong>
              </p>
            </div>

            <button mat-raised-button color="primary" class="mt-auto w-100">
              Ver Detalles
            </button>
          </div>
        </div>
      </div>
    </section>

    <footer class="footer">
      <p>Instrumentación 2025. Todos los derechos reservados. | Concha y Toro 65 – Santiago Centro</p>
    </footer>
  </mat-sidenav-content>
</mat-sidenav-container>
