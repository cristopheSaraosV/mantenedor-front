<mat-toolbar color="primary" class="toolbar">
  <span class="logo">ENERTEST</span>
  <span class="spacer"></span>
  <button mat-button>Inicio</button>
  <button mat-button (click)="goToAdmin()">
    <mat-icon>admin_panel_settings</mat-icon>
    Admin
  </button>
</mat-toolbar>

<section class="hero">
  <div class="hero-text">
    <h2>Cámaras Infrarrojas Industriales portátiles, fijas y para Dron</h2>
    <img src="assets/infra.png" alt="Cámaras Infrarrojas">
  </div>
</section>

<section class="catalogo">
  <h3>Visite nuestro catálogo de productos</h3>

  <!-- Estado de carga -->
  <div *ngIf="loading" class="loading-container">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Cargando productos...</p>
  </div>

  <!-- Estado de error -->
  <div *ngIf="error && !loading" class="error-container">
    <mat-icon color="warn">error</mat-icon>
    <p>{{ error }}</p>
    <button mat-raised-button color="accent" (click)="loadProducts()">
      <mat-icon>refresh</mat-icon>
      Reintentar
    </button>
  </div>

  <!-- Lista de productos -->
  <mat-grid-list cols="4" rowHeight="400px" gutterSize="20px" *ngIf="!loading && !error && productos.length > 0">
    <mat-grid-tile *ngFor="let producto of productos">
      <mat-card class="producto-card">
        <img mat-card-image 
             [src]="producto.imageUrl || 'https://via.placeholder.com/300x200/4CAF50/FFFFFF?text=Sin+Imagen'" 
             alt="Imagen del producto">
        <mat-card-title>{{ producto.model }}</mat-card-title>
        <mat-card-subtitle *ngIf="producto.brand">{{ producto.brand }}</mat-card-subtitle>
        <mat-card-content>
          <p *ngIf="producto.description">{{ producto.description }}</p>
          <div class="product-details" *ngIf="producto.price || producto.country">
            <p *ngIf="producto.price" class="price">
              <mat-icon>euro</mat-icon>
              {{ formatPrice(producto.price) }}
            </p>
            <p *ngIf="producto.country" class="country">
              <mat-icon>public</mat-icon>
              {{ producto.country }}
            </p>
          </div>
          <div class="product-type" *ngIf="producto.productType">
            <mat-icon>label</mat-icon>
            <span>{{ producto.productType.name }}</span>
          </div>
        </mat-card-content>
        <mat-card-actions>
          <button mat-raised-button color="primary">Ver Detalles</button>
          <button mat-stroked-button color="accent">Cotizar Producto</button>
        </mat-card-actions>
      </mat-card>
    </mat-grid-tile>
  </mat-grid-list>

  <!-- Estado vacío -->
  <div *ngIf="!loading && !error && productos.length === 0" class="empty-container">
    <mat-icon>inventory_2</mat-icon>
    <h3>No hay productos disponibles</h3>
    <p>Pronto tendremos nuevos productos en nuestro catálogo</p>
  </div>
</section>

<footer class="footer">
  <p>Instrumentación 2025. Todos los derechos reservados. | Concha y Toro 65 – Santiago Centro</p>
</footer>
